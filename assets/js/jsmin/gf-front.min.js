const body=document.getElementsByTagName("BODY")[0];document.addEventListener("DOMContentLoaded",function(){ajaxRefreshCartCount(),setMegaMenu(),null!==buttonNext&&(sliderButtons(),setTimeout(autoSlide,1e3*banner_speed.speed)),body.classList.contains("single-product")&&viewCountAjax(),gridView()});let marginLeft=0;const buttons=document.getElementsByClassName("sliderButton"),buttonPrevious=document.querySelector(".buttonPrevious"),buttonNext=document.querySelector(".buttonNext");function sliderButtons(){let e=0;for(const t of buttons)t.addEventListener("click",function(){e=parseInt(String(this.attributes.id.value).split("-")[1]),document.querySelector(".slideImg").style.marginLeft=-100*e+"%",this.classList.add("active");for(let e of this.parentNode.children)e!==this&&e.classList.remove("active");marginLeft-=10});buttonPrevious.addEventListener("click",function(){0===e?buttons[buttons.length-1].click():buttons[e-1].click()}),buttonNext.addEventListener("click",function(){e===buttons.length-1?buttons[0].click():buttons[e+1].click()})}function autoSlide(){buttonNext.click(),setTimeout(autoSlide,1e3*banner_speed.speed)}function ajaxRefreshCartCount(){let e=new XMLHttpRequest,t=document.getElementById("cartCount");e.open("POST","/gf-ajax/",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.onload=function(){this.status>=200&&this.status<400&&(t.innerHTML=this.responseText)},e.send("action=refreshCartCount")}const expanderArrow=document.getElementById("nssCatExpander"),expanderSubCats=document.getElementsByClassName("gf-expander__subcategory-list");null!=expanderArrow&&null!=expanderArrow.firstElementChild&&(expanderArrow.firstElementChild.onclick=function(){toggleClass(this,["fa-angle-down","fa-angle-up"]);for(let e of expanderSubCats){let t="height:"+(e.parentElement.clientHeight+e.clientHeight)+"px;";sliderToggle(e.parentElement,t)}});const accordionHead=document.getElementById("accordionHead"),desktopMenu=document.getElementById("nssMegaNav");let height=0;if(null!==desktopMenu)for(let e of desktopMenu.children)height+=e.getBoundingClientRect().height;null!=accordionHead&&(accordionHead.onclick=function(){toggleClass(this.children[1],["fa-angle-down","fa-angle-up"]),sliderToggle(desktopMenu,"height:"+height+"px;"),setTimeout(function(){desktopMenu.hasAttribute("style")&&(desktopMenu.style.overflow="unset")},500)});const searchForm=document.getElementById("gfSearchForm"),searchInput=document.getElementById("gfSearchBox");if(null!=searchForm){searchForm.addEventListener("submit",searchSubmit);let e,t,n=!1,o=300;searchForm.addEventListener("keyup",i=>"Enter"===i.code?(n=!0,!1):searchInput.value.length>=3?void(t!==searchInput.value&&(t=searchInput.value,e=null,e=setTimeout(function(){n||ajaxSearch(t)},o))):(document.getElementById("nssSuggestionBox").display="none",!1))}function searchSubmit(){let e=document.querySelector("[name^=search-radiobutton]:checked");null!==e&&"category"===e.value&&searchForm.setAttribute("action","")}function setMegaMenu(){null!=accordionHead&&(body.classList.contains("archive")||body.classList.contains("single-product")||body.classList.contains("home")||body.classList.contains("woocommerce-account")?toggleClass(accordionHead.children[1],["fa-angle-down","fa-angle-up"]):sliderToggle(desktopMenu,"height:"+height+"px; overflow: unset;"))}function toggleClass(e,t){for(let n of t)e.classList.toggle(n)}function sliderToggle(e,t){let n=!1;e.hasAttribute("style")&&(n=!0),n?e.removeAttribute("style"):e.style=t}function viewCountAjax(){let e=new XMLHttpRequest,t=document.querySelector("[id^=product]").getAttribute("id").split("-")[1];e.open("POST","/gf-ajax/?viewCount=true&postId="+t,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.send("viewCount=true&postId="+t)}const mainCategories=document.getElementsByClassName("category-item");for(let e of mainCategories){let t=e.children[1];e.addEventListener("mouseover",function(){t.style.left=e.offsetWidth+"px",t.style.top="0px",t.style.bottom="unset"})}const grid=document.getElementById("grid");function gridView(){if(null!==grid&&null==getCookie("gridcookie")){let e=document.getElementsByClassName("products");for(let t of e)t.classList.add("grid");grid.classList.add("active")}}function getCookie(e){let t=document.cookie,n=e+"=",o=t.indexOf("; "+n);if(-1===o){if(0!==(o=t.indexOf(n)))return null}else{o+=2;var i=document.cookie.indexOf(";",o);-1===i&&(i=t.length)}return decodeURI(t.substring(o+n.length,i))}function ajaxSearch(e){let t=new XMLHttpRequest;t.open("POST","/gf-ajax/",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.onload=function(){this.status>=200&&this.status<400&&""!==this.responseText.trim()&&(document.getElementById("nssSuggestionBox").innerHTML=this.responseText.trim(),document.getElementById("nssSuggestionBox").style.display="block")},t.send("query="+e)}document.onclick=function(){null!=document.getElementById("nssSuggestionBox")&&document.getElementById("nssSuggestionBox").hasAttribute("style")&&document.getElementById("nssSuggestionBox").removeAttribute("style")};const swiper=new Swiper(".swiper-container",{slidesPerView:2,spaceBetween:0,loop:!0,arrows:!1,breakpoints:{320:{slidesPerView:2,spaceBetween:0},640:{slidesPerView:2,spaceBetween:5},1023:{slidesPerView:2,spaceBetween:5},1024:{slidesPerView:3,spaceBetween:10},1376:{slidesPerView:4,spaceBetween:15}}}),prevButtons=document.getElementsByClassName("product-slider__control-prev"),nextButtons=document.getElementsByClassName("product-slider__control-next");if(null!=prevButtons)for(let e of prevButtons){const t=e.parentElement.parentElement.parentElement.lastElementChild.swiper;e.addEventListener("click",e=>{e.preventDefault(),t.slidePrev()})}if(null!=nextButtons)for(let e of nextButtons){const t=e.parentElement.parentElement.parentElement.lastElementChild.swiper;e.addEventListener("click",e=>{e.preventDefault(),t.slideNext()})}const descriptionButton=document.querySelector(".gf-archive-description-button");null!==descriptionButton&&descriptionButton.addEventListener("click",()=>{document.querySelector(".gf-archive-description p").classList.toggle("gf-display-category-description")});const billingPostcode=document.getElementById("billing_postcode"),shippingPostcode=document.getElementById("shipping_postcode"),billingCompany=document.getElementById("billing_company_checkbox"),billingCompanySettings=document.querySelector("p#billing_company_field > label > span"),billingPibSettings=document.querySelector("p#billing_pib_field > label > span");function toggleViewing(e){"none"===window.getComputedStyle(e).display?e.style.display="block":e.removeAttribute("style")}function showPassword(){const e=document.getElementById("password");"password"===e.getAttribute("type")?e.setAttribute("type","text"):e.setAttribute("type","password")}function checkoutCityAjax(){const e=document.getElementById("billing_city");document.getElementById("shipping_city");e.addEventListener("change",()=>{let t=e.value,n=(e.getAttribute("name"),new XMLHttpRequest);n.open("POST","/gf-ajax/",!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.onload=(()=>{this.status>=200&&this.status<=400&&(billingPostcode.value=this.response)}),n.send(`?city=${t}true&action=getZipCode`)})}function findGetParameter(e){var t=null,n=[];return location.search.substr(1).split("&").forEach(function(o){(n=o.split("="))[0]===e&&(t=decodeURIComponent(n[1]))}),t}null!==billingPostcode&&(checkoutCityAjax(),document.getElementById("ship-to-different-address-checkbox").checked=!1,billingCompany.checked=!1,billingPostcode.addEventListener("keypress",e=>{billingPostcode.value.length>=6&&e.preventDefault()}),billingPostcode.addEventListener("keyup",()=>{billingPostcode.value=billingPostcode.value.replace(/\D/g,"")}),shippingPostcode.addEventListener("keypress",e=>{billingPostcode.value.length>=6&&e.preventDefault()}),shippingPostcode.addEventListener("keyup",()=>{shippingPostcode.value=shippingPostcode.value.replace(/\D/g,"")}),billingCompany.addEventListener("click",e=>{toggleViewing(document.getElementById("billing_pib_field")),toggleViewing(document.getElementById("billing_company_field")),billingCompany.checked&&(document.getElementById("billing_company_field").classList.add("validate-required"),document.getElementById("billing_pib_field").classList.add("validate-required"),billingCompanySettings.classList.remove("optional"),billingCompanySettings.classList.add("required"),billingCompanySettings.textContent="*",billingPibSettings.classList.remove("optional"),billingPibSettings.classList.add("required"),billingPibSettings.textContent="*")})),jQuery(document).ready(function(e){!function(){var t=e("#loadMore");if(t.length>0){var n=!1;e(window).on("scroll",function(){var o=parseInt(e("#loadMore").data("page"));o<1&&(o=1);var i=o+1,s=window.scrollY+3*e(window).height()/4;!n&&s>t.offset().top-200&&s<t.offset().top+100&&(url="/gf-ajax/?query="+t.data("query"),findGetParameter("orderby")&&""!==findGetParameter("orderby")&&(url+="&orderby="+findGetParameter("orderby")),findGetParameter("min_price")&&""!==findGetParameter("min_price")&&(url+="&min_price="+findGetParameter("min_price")+"&max_price="+findGetParameter("max_price")),n=!0,e.ajax({url:url,type:"post",data:{page:i,term:t.data("term"),type:t.data("action"),action:"ajax_load_more"},error:function(e){n=!1},success:function(t){n=!1,0==t?(0==e("#no-more").length&&e("#ajax-content").append('<div id="no-more" class="text-center"><h3>Stigli ste do kraja!</h3><p>Nema proizvoda za tra≈æeni kriterijum.</p></div>'),e("#loadMore").hide(),console.log("the end")):(e("#loadMore").data("page",i),e("#ajax-content").append(t),window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("send","pageview",location+"page/"+o))}}))})}}()});